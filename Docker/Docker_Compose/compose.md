# Docker Compose

### Introduction to Docker Compose
- **Description**: Docker Compose is a tool for defining and running multi-container Docker applications. It uses a YAML file to configure the application's services, networks, and volumes.
- **Primary Components**:
  - **`docker-compose.yml`**: The YAML file that defines the services, networks, and volumes.
  - **Services**: Individual containers that make up the application.
  - **Networks**: Define how containers communicate.
  - **Volumes**: Persist data generated by and used by Docker containers.

### Basic Commands
- **Starting Services**: `docker-compose up`
- **Stopping Services**: `docker-compose down`
- **Building Services**: `docker-compose build`
- **Viewing Logs**: `docker-compose logs`
- **Scaling Services**: `docker-compose up --scale <service>=<number>`

### Key Features
- **Declarative Configuration**: Define multi-container applications with a single YAML file.
- **Simplified Networking**: Automatically creates a network for the services defined in the YAML file.
- **Volumes**: Easily define and share data volumes between containers.

## Interview Questions and Answers

1. **What is Docker Compose, and why is it useful?**
   - Docker Compose is a tool for defining and running multi-container Docker applications. It is useful because it simplifies the process of managing multiple containers by using a single configuration file.

2. **How do you define a service in a `docker-compose.yml` file?**
   - A service is defined using the `services` key in the `docker-compose.yml` file, followed by the service name and its configuration options.
   - Example:
     ```yaml
     services:
       web:
         image: nginx
         ports:
           - "80:80"
     ```

3. **What is the difference between `docker-compose up` and `docker-compose up --build`?**
   - `docker-compose up` starts the services defined in the `docker-compose.yml` file.
   - `docker-compose up --build` rebuilds the images before starting the services.

4. **How can you persist data in Docker Compose?**
   - Data can be persisted by defining volumes in the `docker-compose.yml` file.
   - Example:
     ```yaml
     services:
       db:
         image: postgres
         volumes:
           - db-data:/var/lib/postgresql/data
     volumes:
       db-data:
     ```

5. **How do you scale a service in Docker Compose?**
   - Use the `--scale` flag with the `docker-compose up` command.
   - Example:
     ```bash
     docker-compose up --scale web=3
     ```

## Simple Example

### `docker-compose.yml` File

Create a file named `docker-compose.yml` with the following content:

```yaml
version: '3.8'

services:
  web:
    image: nginx
    ports:
      - "80:80"

  db:
    image: postgres
    environment:
      POSTGRES_DB: mydatabase
      POSTGRES_USER: myuser
      POSTGRES_PASSWORD: mypassword
    volumes:
      - db-data:/var/lib/postgresql/data

volumes:
  db-data:
